!function(e){var t={};function a(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=124)}({124:function(e,t,a){e.exports=a(125)},125:function(e,t){$(document).ready(function(){function e(){$(".upload-del").unbind("click"),$(".upload-copy").bind("click"),$(".upload-del").bind("click",function(){var e=$(this).parent(),t=e.find("p").eq(0).html();$("#modalPage").find(".modal-title").html("Excluir"),$("#modalPage").find(".modal-body").html("Confirma, exclusão do arvivo?<br>"+t),$("#modalPage").find(".modal-footer").html('<button type="submit" class="btn btn-default" data-dismiss="modal">Cancelar</button><button type="button" id="bnt-del-image" class="btn btn-danger pull-right">Sim</button>'),$("#modalPage").modal(),$("#bnt-del-image").click(function(){var a=baseUrl+"api/admin/ajax/post-upload-del",o=new FormData;o.append("id",$("#id").val()),o.append("filename",t),axios.post(a,o).then(function(t){toastr.success("Arquivo apagado!"),e.parent().remove()}).catch(function(e){console.log("Error: "+e.response.status+" / "+e.response.data)}),$("#modalPage").modal("hide")})}),$(".upload-copy").bind("click",function(){var e=$(this).parent().find("#url").val(),t=$("<input>");$("body").append(t),t.val(e).select(),document.execCommand("copy"),t.remove(),toastr.success("Url copiada!")})}$(".date").datepicker({language:"pt-BR",format:"dd/mm/yyyy",autoclose:!0}),$(".fa.fa-calendar").click(function(){$(this).parent().parent().find(".date").show()}),CKEDITOR.replace("text",{height:500}),toastr.options={closeButton:!1,progressBar:!0,positionClass:"toast-bottom-right",preventDuplicates:!0,showDuration:"300",hideDuration:"300",timeOut:"5000",extendedTimeOut:"3000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},$("#save").click(function(e){e.preventDefault();var t=!0;if($(".required").each(function(){$(this).val()?($(this).parent().parent().removeClass("has-error"),$(this).parent().parent().find(".select2-selection.select2-selection--single").css("border","1px solid #d2d6de")):(t=!1,$(this).parent().parent().addClass("has-error"),$(this).parent().parent().find(".select2-selection.select2-selection--single").css("border","1px solid #dd4b39"))}),t){var a=new FormData;a.append("title",$("#title").val()),a.append("summary",$("#summary").val()),a.append("text",CKEDITOR.instances.text.getData()),a.append("dt_publication",$("#dt_publication").val()),a.append("active",$("#active").is(":checked")),a.append("highlight",$("#highlight").is(":checked")),a.append("caption_image",$("#caption_image").val()),a.append("session_id",$("#session_id").val()),a.append("id",$("#id").val()),a.append("user_id",$("#user_id").val()),a.append("keywords",$("#keywords").val()),a.append("id_youtube",$("#id_youtube").val()),a.append("href",$("#href").val()),a.append("live",$("#live").val()),$("#image").prop("files").length&&a.append("image",$("#image").prop("files")[0]);var o=baseUrl+"api/admin/ajax/post-save";axios.post(o,a).then(function(e){var t=e.data;if(t.errors)for(var a=0;a<t.errors.length;a++)toastr.error(t.errors[a]);t.id&&($(".box-title").html(t.id+" :: "+t.title),CKEDITOR.instances.text.setData(t.text),toastr.success("Gravado com sucesso!")),t.id&&$("#id").val()!=t.id&&(window.location.href=baseUrl+"fapesp/materia/"+t.id)}).catch(function(e){console.log(e)})}else toastr.warning("Verifique campos obrigatórios")}),$("#image").change(function(){if($("#image").prop("files").length){var e=baseUrl+"api/admin/ajax/post-view-image",t=new FormData;t.append("image",$("#image").prop("files")[0]),axios.post(e,t).then(function(e){var t=e.data;""!==t&&($(".img-view").find("img").attr("src",t),$(".img-view").removeClass("d-none"),$("#flag-img").val(1))}).catch(function(e){console.log("Error: "+e.response.status+" / "+e.response.data)})}}),$("#del-image").click(function(){event.preventDefault(),$("#modalPage").find(".modal-title").html('<i class="fa fa-fw fa-warning"></i> Alerta!'),$("#modalPage").find(".modal-body").html("Confirma, exclusão da imagem?"),$("#modalPage").find(".modal-footer").html('<button type="submit" class="btn btn-default" data-dismiss="modal">Cancelar</button><button type="button" id="bnt-del-image" class="btn btn-danger pull-right">Sim</button>'),$("#modalPage").modal(),$("#bnt-del-image").click(function(){var e=baseUrl+"api/admin/ajax/post-destroy-image",t=new FormData;t.append("id",$("#id").val()),axios.post(e,t).then(function(e){e.data;$(".img-view").addClass("d-none"),$("#flag-img").val(0),toastr.success("Imagem apagada!")}).catch(function(e){console.log("Error: "+e.response.status+" / "+e.response.data)}),$("#modalPage").modal("hide")})}),$("#del").click(function(){event.preventDefault();var e="Confirma, exclusão da matéria <strong>"+$("#id").val()+"</strong>?";$("#modalPage").find(".modal-title").html('<i class="fa fa-fw fa-warning"></i> Alerta!'),$("#modalPage").find(".modal-body").html(e),$("#modalPage").find(".modal-footer").html('<button type="submit" class="btn btn-default" data-dismiss="modal">Cancelar</button><button type="button" id="bnt-confirm" class="btn btn-danger pull-right">Sim</button>'),$("#modalPage").modal(),$("#bnt-confirm").click(function(){var e=new FormData;e.append("id",$("#id").val());var t=baseUrl+"api/admin/ajax/post-del";axios.post(t,e).then(function(e){e.data;toastr.error("Deletado com sucesso!"),setTimeout(function(){window.location.href=baseUrl+"fapesp/materia"},300)}).catch(function(e){console.log("Error: "+e.response.status+" / "+e.response.data)}),$("#modalPage").modal("hide"),$("#btn-submit").click()})}),$(".btn-copy").click(function(){var e=$("<input>");$("body").append(e),e.val($("#url_copy").val()).select(),document.execCommand("copy"),e.remove(),toastr.success("Link copiado!")}),$("#keywords").select2({tags:!0}),$("#id_youtube").select2({tags:!0,createTag:function(e){var t=e.term.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);if($("#id_youtube").val().length)return null;if(t&&11==t[2].length){var a='<img src = "https://img.youtube.com/vi/'+t[2]+'/0.jpg" >';return $(".youtube-preview").html(a),{id:t[2],text:t[2]}}if(11==e.term.length){a='<img src = "https://img.youtube.com/vi/'+e.term+'/0.jpg" >';return $(".youtube-preview").html(a),{id:e.term,text:e.term}}return $(".youtube-preview").html(""),null}}),$("#id_youtube").on("change",function(){0==$("#id_youtube").val().length&&$(".youtube-preview").html("")}),$("#session_id").on("change",function(){$(".video").hide(),$(".no-video").show(),$(".no-content").show(),4==$("#session_id").val()&&($(".video").show(),$(".no-video").hide()),7!=$("#session_id").val()&&14!=$("#session_id").val()||$(".no-content").hide()}),$("#session_id").change(),$("#files").change(function(){if(""==$("#id").val())$("#modalPage").find(".modal-title").html("Aviso"),$("#modalPage").find(".modal-body").html("Não é possivél subir arquivos antes de gravar matéria!"),$("#modalPage").find(".modal-footer").html('<button type="submit" class="btn btn-default" data-dismiss="modal">ok</button>'),$("#modalPage").modal();else if($("#files").prop("files").length){for(var t=baseUrl+"api/admin/ajax/post-upload",a=new FormData,o=0;o<$("#files").prop("files").length;o++)a.append("file"+o,$("#files").prop("files")[o]);a.append("id",$("#id").val()),axios.post(t,a).then(function(t){for(var a=t.data,o="",i=0;i<a.length;i++)o+='<div class="col-lg-2 col-xs-4"><div class="file-item">',0==a[i].icon?o+='<img src="'+a[i].url+'" width="100" alt="">':o+='<i class="fa fa-fw '+a[i].icon+'"> </i>',o+="<p>"+a[i].name+"</p>",o+='<input type="hidden" id="url" value="'+a[i].url+'">',o+='<button class="btn btn-danger upload-del"> Excluir </button> ',o+='<button class="btn btn-info upload-copy"> Copiar </button>',o+="</div></div>";$(".file-item").length?$(".file-item").eq(0).parent().before(o):$(".box-footer").find(".row").html(o),e()}).catch(function(e){console.log(e)})}}),e()})}});