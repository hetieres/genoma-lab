!function(t){var a={};function e(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=a,e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},e.p="",e(e.s=142)}({142:function(t,a,e){t.exports=e(143)},143:function(t,a){$(document).ready(function(){function t(t,a){Highcharts.chart(t,{chart:{type:"column"},title:{text:a.title},subtitle:{text:a.filter},xAxis:{type:"category"},yAxis:{title:{text:"Total de Notícias"}},legend:{enabled:!1},credits:{enabled:!0,text:"Fapesp na Mídia",href:baseUrl},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y:.0f}"}}},tooltip:{headerFormat:'<span style="font-size:11px">{series.name}</span><br>',pointFormat:'<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.0f}</b><br/>'},series:[{name:a.type,colorByPoint:!0,data:a.data}]})}function a(t,a){var e="";for(i=0;i<a.data.length;i++)".table4"==t?(1==a.data[i].country_id&&(a.data[i].country=a.data[i].country+" | "+a.data[i].state+" | "+a.data[i].city),e+="<tr><td>"+a.data[i].id+"</td><td>"+a.data[i].description+"</td><td>"+a.data[i].country+"</td><td>"+a.data[i].media_type+"</td><td>"+a.data[i].url+"</td><td>"+a.data[i].total+"</td></tr>"):(e+="<tr><td>"+(i+1)+".</td><td>"+a.data[i].title+"</td>",a.data[i].url_fapesp&&(e+="<td>"+a.data[i].url_fapesp+"</td>"),e+="<td>"+a.data[i].total+"</td></tr>");$(t).html(e),$(t).parent().parent().parent().find(".filter").html(a.filter);var n=$(t).parent().parent().parent(),r=$(n).parent().find(".btn-download"),o=$(n).find("h3").html()+".png";setTimeout(function(){html2canvas(n,{onrendered:function(t){var a=t.toDataURL("image/png").replace(/^data:image\/png/,"data:application/octet-stream");$(r).attr("download",o).attr("href",a)}})},500)}$('input[name="daterange"]').daterangepicker({autoUpdateInput:!1,opens:"left",ranges:{"Últimos 7 dias":[moment().subtract(6,"days"),moment()],"Últimos 30 dias":[moment().subtract(29,"days"),moment()],"Este Mês":[moment().startOf("month"),moment().endOf("month")],"Mês Anterior":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},locale:{format:"DD/MM/YYYY",separator:" - ",applyLabel:"Aplicar",cancelLabel:"Limpar",fromLabel:"De",toLabel:"Para",customRangeLabel:"Personalizado",weekLabel:"S",daysOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],firstDay:1}},function(t,a,e){console.log("Uma nova seleção de data foi feita: "+t.format("DD-MM-YYYY")+" à "+a.format("DD-MM-YYYY"))}).on("apply.daterangepicker",function(t,a){$(this).val(a.startDate.format("DD/MM/YYYY")+" - "+a.endDate.format("DD/MM/YYYY")),$("#btn-submit").click()}).on("cancel.daterangepicker",function(t,a){$(this).val(""),$("#btn-submit").click()}),$(".btn-filter").click(function(){$(".load").removeClass("d-none"),$(".done").addClass("d-none");var e=new FormData;e.append("news_status_id",$("#cb_status").val()),e.append("media_type_id",$("#cb_media").val()),e.append("category_id",$("#cb_category").val()),e.append("vehicle_id",$("#cb_vehicle").val()),e.append("citation_type_id",$("#cb_citation").val()),e.append("vehicle_type",$("#cb_type_vehicle").val()),e.append("limit",$("#cb_limit").val()),e.append("key",$("#key").val()),$('input[name="daterange"]').val().length&&e.append("period",$('input[name="daterange"]').data("daterangepicker").startDate.format("YYYY-MM-DD")+","+$('input[name="daterange"]').data("daterangepicker").endDate.format("YYYY-MM-DD"));var n=baseUrl+"api/admin/ajax/report/news";axios.post(n,e).then(function(e){var n;$(".done").removeClass("d-none"),$(".load").addClass("d-none"),t("container1",e.data[0]),t("container2",e.data[1]),a(".table1",e.data[2]),a(".table2",e.data[3]),function(t,a){var e="";for(i=0;i<a.data.length;i++)".table3"==t?e+="<tr><td>"+a.data[i].id+".</td><td>"+a.data[i].title+"</td><td>"+a.data[i].vehicle.description+" | "+a.data[i].mediaType.description+"</td><td>"+a.data[i].from+"</td><td>"+a.data[i].url+"</td><td>"+a.data[i].date+"</td></tr>":".table4"==t&&(e+="<tr><td>"+a.data[i].id+"</td><td>"+a.data[i].description+"</td><td>"+a.data[i].media_type+"</td><td>"+a.data[i].url+"</td><td>"+a.data[i].total+"</td></tr>");$(t).html(e),$(t).parent().parent().parent().find(".filter").html(a.filter);var n=$(t).parent().parent().parent().parent().find(".btn-download").eq(0),r=baseUrl+"fapesp/relatorio/noticias/download?"+a.url;n.html("Download ("+a.total+" notícias)"),n.attr("href",r),$(".help-block").html("Total filtrado :: "+a.total)}(".table3",e.data[4]),n=e.data[5],Highcharts.chart("container3",{chart:{type:"line"},title:{text:"Repercussão "},subtitle:{text:"Mês X Período"+n.filter},xAxis:{categories:n.months,crosshair:!0},yAxis:{min:0,title:{text:"Repercussão"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.0f} </b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},credits:{enabled:!0,text:"Fapesp na Mídia",href:baseUrl},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:n.series}),a(".table4",e.data[6])}).catch(function(t){console.log(t.response)})}),$(".btn-clear").click(function(){$("#cb_status").val(0).trigger("change"),$("#cb_media").val(0).trigger("change"),$("#cb_category").val(0).trigger("change"),$("#cb_vehicle").val(0).trigger("change"),$("#cb_type_vehicle").val(0).trigger("change"),$("#cb_limit").val("15").trigger("change"),$('input[name="daterange"]').val(""),$(".btn-filter").click()}),setTimeout(function(){$(".btn-filter").click()},500)})}});